(()=>{var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{extend:()=>oe});const a=flarum.core.compat["forum/app"];var r=e.n(a);const s=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/UserPage"];var o=e.n(n);const i=flarum.core.compat["common/components/LinkButton"];var c=e.n(i);const d=flarum.core.compat["forum/components/NotificationGrid"];var u=e.n(d);function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}const p=flarum.core.compat["common/components/LoadingIndicator"];var b=e.n(p);const h=flarum.core.compat["common/components/Modal"];var k=e.n(h);const v=flarum.core.compat["common/components/Button"];var y=e.n(v);const g=flarum.core.compat["common/components/Select"];var _=e.n(g);const F=flarum.core.compat["common/utils/Stream"];var N=e.n(F),I=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var a=t.prototype;return a.oninit=function(t){e.prototype.oninit.call(this,t),this.user=this.attrs.user,this.loading=!1,this.type=N()("positive"),this.role=N()("buyer"),this.comment=N()(""),this.discussionInput=N()(""),this.discussionId=null},a.className=function(){return"Modal Modal--medium"},a.title=function(){return r().translator.trans("huseyinfiliz-traderfeedback.forum.form.title",{username:this.user.displayName()})},a.content=function(){var e=this,t=r().forum.attribute("huseyinfiliz.traderfeedback.requireDiscussion")||!1,a=!1!==r().forum.attribute("huseyinfiliz.traderfeedback.allowNegative"),s={positive:r().translator.trans("huseyinfiliz-traderfeedback.forum.form.type_positive"),neutral:r().translator.trans("huseyinfiliz-traderfeedback.forum.form.type_neutral")};return a&&(s.negative=r().translator.trans("huseyinfiliz-traderfeedback.forum.form.type_negative")),m(".Modal-body",[m(".Form",[m(".Form-group",[m("label",r().translator.trans("huseyinfiliz-traderfeedback.forum.form.type_label")),_().component({value:this.type(),options:s,onchange:this.type})]),m(".Form-group",[m("label",r().translator.trans("huseyinfiliz-traderfeedback.forum.form.role_label")),_().component({value:this.role(),options:{buyer:r().translator.trans("huseyinfiliz-traderfeedback.forum.form.role_buyer"),seller:r().translator.trans("huseyinfiliz-traderfeedback.forum.form.role_seller"),trader:r().translator.trans("huseyinfiliz-traderfeedback.forum.form.role_trader")},onchange:this.role})]),m(".Form-group",[m("label",[r().translator.trans("huseyinfiliz-traderfeedback.forum.form.discussion_label"),t&&m("span.required"," *")]),m("input.FormControl",{value:this.discussionInput(),oninput:function(t){e.discussionInput(t.target.value),e.parseDiscussionId(t.target.value)},placeholder:r().translator.trans("huseyinfiliz-traderfeedback.forum.form.discussion_placeholder"),required:t}),m(".helpText",r().translator.trans("huseyinfiliz-traderfeedback.forum.form.discussion_help"))]),m(".Form-group",[m("label",r().translator.trans("huseyinfiliz-traderfeedback.forum.form.comment_label")),m("textarea.FormControl",{value:this.comment(),oninput:function(t){return e.comment(t.target.value)},placeholder:r().translator.trans("huseyinfiliz-traderfeedback.forum.form.comment_placeholder"),rows:5})]),m(".Form-group",[y().component({type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.comment().trim()||t&&!this.discussionId},r().translator.trans("huseyinfiliz-traderfeedback.forum.form.submit_button"))])])])},a.parseDiscussionId=function(e){if(e){var t=e.match(/\/d\/(\d+)(?:-[^\/]+)?/);if(t)this.discussionId=parseInt(t[1]);else{var a=e.match(/^\d+$/);this.discussionId=a?parseInt(e):null}}else this.discussionId=null},a.onsubmit=function(e){var t=this;if(e.preventDefault(),this.comment().trim())if(!r().forum.attribute("huseyinfiliz.traderfeedback.requireDiscussion")||this.discussionId){var a=r().forum.attribute("huseyinfiliz.traderfeedback.minLength")||10,s=r().forum.attribute("huseyinfiliz.traderfeedback.maxLength")||1e3;if(this.comment().length<a)r().alerts.show({type:"error"},r().translator.trans("huseyinfiliz-traderfeedback.forum.form.error_too_short",{min:a}));else if(this.comment().length>s)r().alerts.show({type:"error"},r().translator.trans("huseyinfiliz-traderfeedback.forum.form.error_too_long",{max:s}));else if(!1!==r().forum.attribute("huseyinfiliz.traderfeedback.allowNegative")||"negative"!==this.type()){this.loading=!0,m.redraw();var n={to_user_id:this.user.id(),type:this.type(),role:this.role(),comment:this.comment()};this.discussionId&&(n.discussion_id=this.discussionId),r().request({method:"POST",url:r().forum.attribute("apiUrl")+"/trader/feedback",body:{data:{type:"feedbacks",attributes:n}}}).then((function(){r().alerts.show({type:"success"},r().translator.trans("huseyinfiliz-traderfeedback.forum.form.success")),t.hide(),window.location.reload()})).catch((function(e){t.loading=!1,m.redraw(),e.response&&e.response.errors?r().alerts.show({type:"error"},e.response.errors[0].detail):r().alerts.show({type:"error"},"Error submitting feedback")}))}else r().alerts.show({type:"error"},"Negative feedback is not allowed.")}else r().alerts.show({type:"error"},r().translator.trans("huseyinfiliz-traderfeedback.forum.form.error_discussion_required"))},t}(k());const z=flarum.core.compat["common/Component"];var w=e.n(z),T=function(e){function t(){return e.apply(this,arguments)||this}return f(t,e),t.prototype.view=function(){var e=this.attrs,t=e.stats;if(e.loading)return m("div",{className:"TraderFeedbackPage-stats"},m(b(),{size:"small"}));if(!t)return null;var a=t.positive_count+t.neutral_count+t.negative_count>0?Math.round(t.score):0;return m("div",{className:"TraderFeedbackPage-stats"},m("div",{className:"TraderFeedbackPage-stat TraderFeedbackPage-stat--score"},m("div",{className:"TraderFeedbackPage-stat-value"},a,"%"),m("div",{className:"TraderFeedbackPage-stat-label"},r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.stats.score"))),m("div",{className:"TraderFeedbackPage-stat TraderFeedbackPage-stat--positive"},m("div",{className:"TraderFeedbackPage-stat-value"},t.positive_count),m("div",{className:"TraderFeedbackPage-stat-label"},r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.stats.positive"))),m("div",{className:"TraderFeedbackPage-stat TraderFeedbackPage-stat--neutral"},m("div",{className:"TraderFeedbackPage-stat-value"},t.neutral_count),m("div",{className:"TraderFeedbackPage-stat-label"},r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.stats.neutral"))),m("div",{className:"TraderFeedbackPage-stat TraderFeedbackPage-stat--negative"},m("div",{className:"TraderFeedbackPage-stat-value"},t.negative_count),m("div",{className:"TraderFeedbackPage-stat-label"},r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.stats.negative"))))},t}(w()),U=function(e){function t(){return e.apply(this,arguments)||this}return f(t,e),t.prototype.view=function(){var e=this.attrs,t=e.filter,a=e.user,s=e.onFilterChange,n=e.onGiveFeedback,o=!1!==r().forum.attribute("huseyinfiliz.traderfeedback.allowNegative"),i={all:r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.filter.all"),positive:r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.filter.positive"),neutral:r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.filter.neutral")};return o&&(i.negative=r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.filter.negative")),m("div",{className:"TraderFeedbackPage-filters"},m("div",{className:"TraderFeedbackPage-filterSelect"},m(_(),{value:t,options:i,onchange:s})),r().session.user&&r().session.user.id()!==a.id()&&m(y(),{className:"Button Button--primary TraderFeedbackPage-giveBtn",onclick:n},m("i",{className:"fas fa-plus TraderFeedbackPage-giveBtnIcon"}),m("span",{className:"TraderFeedbackPage-giveBtnText"},r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.give_feedback_button")),m("span",{className:"TraderFeedbackPage-giveBtnTextShort"},"Give")))},t}(w());const P=flarum.core.compat["common/components/Placeholder"];var x=e.n(P);const S=flarum.core.compat["common/helpers/humanTime"];var B=e.n(S),C=function(){function e(){}return e.getUserInfo=function(e){var t=e.displayName||"Unknown User",a=e.avatarColor||"#888",s=e.avatarUrl||null,n=null;if(e.includedUsers){var o=e.includedUsers.get(String(e.userId));o&&(t=o.displayName||o.username||"User #"+e.userId,s=o.avatarUrl)}return(n=r().store.getById("users",String(e.userId)))&&(t=n.displayName()||t,a=n.color()||a,s=n.avatarUrl()||s),{displayName:t,avatarColor:a,avatarUrl:s,fromUser:n}},e.view=function(e){var t,a=this.getUserInfo(e),s=a.displayName,n=a.avatarColor,o=a.avatarUrl,i=a.fromUser,c=i?r().route("user",{username:i.slug()}):null,d=o?m("img",{className:"FeedbackItem-avatar",src:o,alt:s}):m("span",{className:"FeedbackItem-avatar FeedbackItem-avatar--placeholder",style:{background:n}},(null==(t=s[0])?void 0:t.toUpperCase())||"?"),u=m("span",{className:"FeedbackItem-username"},s);return c?m("div",{className:"FeedbackItem-user"},m("a",{href:c,className:"FeedbackItem-userLink"},d),m("a",{href:c,className:"FeedbackItem-userLink"},u)):m("div",{className:"FeedbackItem-user"},d,u)},e}(),L=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).loading=!1,t}f(t,e);var a=t.prototype;return a.view=function(){var e,t=this.attrs,a=t.feedback,r=t.includedUsers,s=(t.onDelete,t.onReport,a.attributes||{}),n=null==(e=a.relationships)||null==(e=e.fromUser)?void 0:e.data,o=(null==n?void 0:n.id)||s.fromUserId||s.from_user_id,i=s.createdAt||s.created_at||(new Date).toISOString();return m("div",{className:"FeedbackItem FeedbackItem--"+s.type,key:a.id},m("div",{className:"FeedbackItem-header"},m("div",{className:"FeedbackItem-headerLeft"},C.view({userId:o,includedUsers:r}),this.renderTypeBadge(s.type),this.renderRoleBadge(s.role)),m("div",{className:"FeedbackItem-headerRight"},m("span",{className:"FeedbackItem-date"},B()(i)),this.renderDiscussionLink(s))),m("div",{className:"FeedbackItem-comment"},s.comment||"No comment provided"),this.renderActions(a,o))},a.renderTypeBadge=function(e){var t=r().translator.trans("huseyinfiliz-traderfeedback.forum.form.type_"+e);return m("span",{className:"FeedbackItem-type FeedbackItem-type--"+e},m("i",{className:{positive:"fas fa-thumbs-up",neutral:"fas fa-minus",negative:"fas fa-thumbs-down"}[e]+" FeedbackItem-typeIcon"}),m("span",{className:"FeedbackItem-typeText"},t))},a.renderRoleBadge=function(e){var t=r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_item.as_"+e);return m("span",{className:"FeedbackItem-role"},m("i",{className:{buyer:"fas fa-shopping-cart",seller:"fas fa-store",trader:"fas fa-exchange-alt"}[e]+" FeedbackItem-roleIcon"}),m("span",{className:"FeedbackItem-roleText"},t))},a.renderDiscussionLink=function(e){return e.discussionId||e.discussion_id?!1===e.discussionExists?m("span",{className:"FeedbackItem-discussionLink FeedbackItem-discussionLink--deleted"},m("i",{className:"fas fa-unlink"})):!1===e.canViewDiscussion?m("span",{className:"FeedbackItem-discussionLink FeedbackItem-discussionLink--locked"},m("i",{className:"fas fa-lock"})):m("a",{href:r().route("discussion",{id:e.discussionId||e.discussion_id}),className:"FeedbackItem-discussionLink",target:"_blank",rel:"noopener noreferrer"},m("i",{className:"fas fa-external-link-alt"}),m("span",{className:"FeedbackItem-discussionLinkText"},r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_item.discussion_link")),m("span",{className:"FeedbackItem-discussionLinkTextShort"},"View")):null},a.renderActions=function(e,t){var a=this,s=r().session.user;if(!s)return null;var n=e.attributes||{},o=!1!==n.canReport&&!1!==s.attribute("canReportFeedback"),i=n.canDelete||s.attribute("canDeleteFeedback"),c=s.attribute("canModerateFeedback"),d=s.id()===String(t);return o||i||d||c?m("div",{className:"FeedbackItem-actions"},!d&&o&&m(y(),{className:"Button Button--link FeedbackItem-reportBtn",onclick:function(){return a.attrs.onReport(e)},title:r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_item.report_button")},m("i",{className:"fas fa-flag"}),m("span",{className:"FeedbackItem-actionText"},r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_item.report_button"))),(d||i||c)&&m(y(),{className:"Button Button--link Button--danger FeedbackItem-deleteBtn",onclick:function(){return a.attrs.onDelete(e)},title:r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_item.delete_button")},m("i",{className:"fas fa-trash"}),m("span",{className:"FeedbackItem-actionText"},r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_item.delete_button")))):null},t}(w()),D=function(e){function t(){return e.apply(this,arguments)||this}return f(t,e),t.prototype.view=function(){var e=this.attrs,t=e.feedbacks,a=e.includedUsers,s=e.onDelete,n=e.onReport;return t&&Array.isArray(t)&&0!==t.length?m("div",{className:"TraderFeedbackPage-list"},t.map((function(e){return m(L,{feedback:e,includedUsers:a,onDelete:s,onReport:n,key:e.id})}))):m(x(),{text:r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_page.no_feedback")})},t}(w()),A=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).feedbacks=[],t.stats=null,t.loading=!1,t.statsLoading=!1,t.filter="all",t.includedUsers=new Map,t}f(t,e);var a=t.prototype;return a.oninit=function(t){e.prototype.oninit.call(this,t),this.loading=!0,this.statsLoading=!0,this.loadUser(this.attrs.username)},a.oncreate=function(t){e.prototype.oncreate.call(this,t),this.loadFeedbacks(),this.loadStats()},a.content=function(){var e=this;return this.loading||!this.user?m("div",{className:"TraderFeedbackPage"},m(b(),null)):m("div",{className:"TraderFeedbackPage"},m("div",{className:"TraderFeedbackPage-header"},m(T,{stats:this.stats,loading:this.statsLoading})),m(U,{filter:this.filter,user:this.user,onFilterChange:function(t){return e.handleFilterChange(t)},onGiveFeedback:function(){return e.showFeedbackModal()}}),m(D,{feedbacks:this.feedbacks,includedUsers:this.includedUsers,onDelete:function(t){return e.deleteFeedback(t)},onReport:function(t){return e.reportFeedback(t)}}))},a.handleFilterChange=function(e){this.filter=e,this.loadFeedbacks()},a.showFeedbackModal=function(){r().modal.show(I,{user:this.user})},a.loadFeedbacks=function(){var e=this;this.user?(this.loading=!0,r().request({method:"GET",url:r().forum.attribute("apiUrl")+"/trader/feedback",params:{filter:{user:this.user.id(),type:"all"===this.filter?null:this.filter}}}).then((function(t){e.processIncludedUsers(t),e.feedbacks=Array.isArray(t.data)?t.data:[],e.loading=!1,m.redraw()})).catch((function(){e.feedbacks=[],e.loading=!1,m.redraw()}))):setTimeout((function(){return e.loadFeedbacks()}),100)},a.loadStats=function(){var e=this;this.user?(this.statsLoading=!0,r().request({method:"GET",url:r().forum.attribute("apiUrl")+"/trader/stats/"+this.user.id()}).then((function(t){if(t&&t.data){var a=t.data.attributes||t.data;e.stats={score:a.score||0,positive_count:a.positive_count||0,neutral_count:a.neutral_count||0,negative_count:a.negative_count||0}}else e.stats=e.getDefaultStats();e.statsLoading=!1,m.redraw()})).catch((function(){e.stats=e.getDefaultStats(),e.statsLoading=!1,m.redraw()}))):setTimeout((function(){return e.loadStats()}),100)},a.processIncludedUsers=function(e){var t=this;e.included&&e.included.forEach((function(e){if("users"===e.type){t.includedUsers.set(e.id,e.attributes);var a=r().store.getById("users",e.id);a?a.pushData(e.attributes):r().store.pushPayload({data:e})}}))},a.getDefaultStats=function(){return{score:0,positive_count:0,neutral_count:0,negative_count:0}},a.reportFeedback=function(e){var t=this,a=prompt("Please provide a reason for reporting this feedback:");a&&a.trim()&&(this.loading=!0,m.redraw(),r().request({method:"POST",url:r().forum.attribute("apiUrl")+"/trader/feedback/"+e.id+"/report",body:{data:{attributes:{reason:a.trim()}}}}).then((function(){t.loading=!1,r().alerts.show({type:"success"},r().translator.trans("huseyinfiliz-traderfeedback.forum.report_modal.success")),m.redraw()})).catch((function(){t.loading=!1,r().alerts.show({type:"error"},"Failed to report feedback"),m.redraw()})))},a.deleteFeedback=function(e){var t=this;confirm(r().translator.trans("huseyinfiliz-traderfeedback.forum.feedback_item.confirm_delete"))&&(this.loading=!0,m.redraw(),r().request({method:"DELETE",url:r().forum.attribute("apiUrl")+"/trader/feedback/"+e.id}).then((function(){t.loading=!1,t.feedbacks=t.feedbacks.filter((function(t){return t.id!==e.id})),t.loadStats(),r().alerts.show({type:"success"},"Feedback deleted successfully"),m.redraw()})).catch((function(){t.loading=!1,r().alerts.show({type:"error"},"Failed to delete feedback"),m.redraw()})))},t}(o());const O=flarum.core.compat["forum/utils/UserControls"];var M=e.n(O);const j=flarum.core.compat["forum/components/UserCard"];var R=e.n(j);const q=flarum.core.compat["common/Model"];var E=e.n(q);const G=flarum.core.compat["common/models/User"];var V=e.n(G),Y=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).positiveCount=E().attribute("positive_count"),t.negativeCount=E().attribute("negative_count"),t.neutralCount=E().attribute("neutral_count"),t.score=E().attribute("score"),t.lastUpdated=E().attribute("last_updated",E().transformDate),t}return f(t,e),t}(E());const $=flarum.core.compat["forum/components/CommentPost"];var H=e.n($);const J=flarum.core.compat["forum/components/Notification"];var K=e.n(J);const Q=flarum.core.compat["common/helpers/username"];var W=e.n(Q),X=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var a=t.prototype;return a.icon=function(){return"fas fa-check-circle"},a.href=function(){var e=this.attrs.notification.fromUser();return e?app.route("user.feedbacks",{username:e.slug()}):app.route("index")},a.content=function(){var e=this.attrs.notification.fromUser();return e?app.translator.trans("huseyinfiliz-traderfeedback.forum.notifications.feedback_approved_title",{username:W()(e)}):"Your feedback was approved"},a.excerpt=function(){return""},t}(K()),Z=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var a=t.prototype;return a.icon=function(){return"fas fa-times-circle"},a.href=function(){var e=this.attrs.notification.fromUser();return e?app.route("user.feedbacks",{username:e.slug()}):app.route("index")},a.content=function(){var e=this.attrs.notification.fromUser();return e?app.translator.trans("huseyinfiliz-traderfeedback.forum.notifications.feedback_rejected_title",{username:W()(e)}):"Your feedback was rejected"},a.excerpt=function(){return""},t}(K()),ee=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var a=t.prototype;return a.icon=function(){var e=(this.attrs.notification.data||{}).feedbackType||"neutral";return"positive"===e?"fas fa-thumbs-up":"negative"===e?"fas fa-thumbs-down":"fas fa-exchange-alt"},a.href=function(){var e=this.attrs.notification.fromUser();return e?app.route("user.feedbacks",{username:e.slug()}):app.route("index")},a.content=function(){var e=this.attrs.notification,t=e.fromUser(),a=e.data||{};if(!t)return"Someone gave you feedback";var r=a.feedbackType||"neutral",s="seller"===(a.role||"buyer")?app.translator.trans("huseyinfiliz-traderfeedback.forum.form.role_seller"):app.translator.trans("huseyinfiliz-traderfeedback.forum.form.role_buyer"),n=app.translator.trans("huseyinfiliz-traderfeedback.forum.form.type_"+r);return app.translator.trans("huseyinfiliz-traderfeedback.forum.notifications.new_feedback_title",{username:W()(t),type:n,role:s})},a.excerpt=function(){return(this.attrs.notification.data||{}).comment||""},t}(K()),te=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).type=E().attribute("type"),t.comment=E().attribute("comment"),t.role=E().attribute("role"),t.isApproved=E().attribute("isApproved"),t.createdAt=E().attribute("createdAt",E().transformDate),t.fromUser=E().hasOne("fromUser"),t.toUser=E().hasOne("toUser"),t}return f(t,e),t}(E());const ae=flarum.core.compat["common/extenders"];var re=e.n(ae);const se=flarum.core.compat["common/models/Forum"];var ne=e.n(se);const oe=[new(re().Model)(ne()).attribute("huseyinfilizTraderAdmin").attribute("huseyinfilizTraderUser")];r().initializers.add("huseyinfiliz-traderfeedback",(function(){r().store.models["trader-feedbacks"]=te,r().feedbackModal=I,r().notificationComponents.feedbackApproved=X,r().notificationComponents.feedbackRejected=Z,r().notificationComponents.newFeedback=ee,console.log("✅ Trader feedback notification components registered"),r().routes["user.feedbacks"]={path:"/u/:username/feedbacks",component:A},(0,s.extend)(o().prototype,"navItems",(function(e){var t;e.add("traderFeedbacksLink",m(c(),{href:r().route("user.feedbacks",{username:null==(t=this.user)?void 0:t.slug()}),name:"feedbacks",icon:"fas fa-exchange-alt"},r().translator.trans("huseyinfiliz-traderfeedback.forum.nav.feedback_link")),79)})),(0,s.extend)(u().prototype,"notificationTypes",(function(e){e.add("newFeedback",{name:"newFeedback",icon:"fas fa-exchange-alt",label:r().translator.trans("huseyinfiliz-traderfeedback.forum.settings.notify_new_feedback_label")}),e.add("feedbackApproved",{name:"feedbackApproved",icon:"fas fa-check-circle",label:r().translator.trans("huseyinfiliz-traderfeedback.forum.settings.notify_feedback_approved_label")}),e.add("feedbackRejected",{name:"feedbackRejected",icon:"fas fa-times-circle",label:r().translator.trans("huseyinfiliz-traderfeedback.forum.settings.notify_feedback_rejected_label")})})),(0,s.extend)(M(),"userControls",(function(e,t){r().session.user&&r().session.user.id()!==t.id()&&e.add("giveFeedback",y().component({icon:"fas fa-exchange-alt",onclick:function(){r().modal.show(I,{user:t})}},r().translator.trans("huseyinfiliz-traderfeedback.forum.form.submit_button")),100)})),r().store.models["trader-stats"]=Y,V().prototype.traderStats=E().hasOne("traderStats"),(0,s.extend)(R().prototype,"infoItems",(function(e){var t=this.attrs.user;if(t&&t.traderStats()){var a=t.traderStats(),r=Math.round(a.score());a.positiveCount()+a.neutralCount()+a.negativeCount()>0&&e.add("traderScore",m("div",{className:"TraderScore"},m("i",{className:"fas fa-balance-scale"}),m("span",{className:"TraderScore-value"},r,"%")),10)}})),(0,s.extend)(H().prototype,"headerItems",(function(e){if(r().forum.attribute("huseyinfiliz.traderfeedback.showBadgeInPosts")){var t=this.attrs.post.user();if(t&&t.traderStats()){var a=t.traderStats(),s=Math.round(a.score());0!==a.positiveCount()+a.neutralCount()+a.negativeCount()&&e.add("traderBadge",m("span",{className:"TraderBadge TraderBadge--inline"},m("i",{className:"fas fa-balance-scale"}),m("span",{className:"TraderBadge-score"},s,"%")),-5)}}})),console.log("✅ Trader feedback extension initialized"),console.log("Registered notification components:",Object.keys(r().notificationComponents)),console.log("Registered models:",Object.keys(r().store.models))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map